

# ==============================================================
# Database Configuration (Dynamic)
# ==============================================================
# Pattern: ${ENV_VAR_NAME:default_value_for_local_dev}

# JDBC URL: Connects to container in Prod, or localhost in Dev
spring.datasource.url=${APP_DB_URL:jdbc:postgresql://localhost:5432/notes_db}

# Credentials
spring.datasource.username=${APP_DB_USERNAME:admin}
spring.datasource.password=${APP_DB_PASSWORD:admin}

spring.datasource.driver-class-name=org.postgresql.Driver



# ==============================================================
# JPA / Hibernate Settings
# ==============================================================

# Crucial: Validates that the Java entities match the DB schema at startup (No auto-create)
spring.jpa.hibernate.ddl-auto=validate
# Logs SQL queries generated by Hibernate to the console (for debugging)
spring.jpa.show-sql=true
# Tells Hibernate to generate SQL syntax specific to PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect







# ==============================================================
# AWS S3 Storage Configuration
# ==============================================================
# These must be supplied via Environment Variables (No defaults for security)
spring.cloud.aws.credentials.access-key=${AWS_ACCESS_KEY}
spring.cloud.aws.credentials.secret-key=${AWS_SECRET_KEY}
spring.cloud.aws.region.static=${AWS_REGION:us-east-1}
app.s3.bucket=${AWS_BUCKET_NAME}


# ==============================================================
# Security & Identity (Keycloak)
# ==============================================================
# The Issuer URI (Where tokens are issued from)
# Default points to localhost for local development
spring.security.oauth2.resourceserver.jwt.issuer-uri=${AUTH_ISSUER_URI:http://localhost:8088/realms/notes-realm}

# The JWK Set URI (Where Spring fetches public keys to validate tokens)
# In Docker, this usually points to the internal container name (http://keycloak:8080...)
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${AUTH_JWK_URI:http://localhost:8088/realms/notes-realm/protocol/openid-connect/certs}

